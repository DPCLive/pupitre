// Vincent D, le 14/01/2020

// Données D0 à D7
#define byte dataPin[8] = {29, 31, 33, 35, 37, 29, 41, 43};
// A1 à A4
#define int aPin[4] PROGMEM = {24, 25, 26, 27};

#define int IOWR PROGMEM = 29; // int en byte
#define int IORD PROGMEM = 30; // int en byte
#define int RST PROGMEM = 22; // int en byte
#define int CLK PROGMEM = 23; // int en byte

#define  int DataPinMode = INPUT & INPUT_PULLUP & OUTPUT;

void setup() {
  // put your setup code here, to run once:
 // init flags pins            
  pinMode(pgm_read_word(&IOWR), OUTPUT );          
  pinMode(pgm_read_word(&IORD), OUTPUT );          
  pinMode(pgm_read_word(&RST), OUTPUT );
  pinMode(pgm_read_word(&CLK), OUTPUT );

  // init w pins
  for (int i=0; i<4; i++)
    pinMode(pgm_read_word(&aPin[i]), OUTPUT );  

  digitalWrite(pgm_read_word(&IOWR), LOW );          
  digitalWrite(pgm_read_word(&IORD), LOW );          
  digitalWrite(pgm_read_word(&RST), LOW );          
  digitalWrite(pgm_read_word(&CLK), LOW );    

  setDataPinAsOutput();

  
}

void loop() {
  // put your main code here, to run repeatedly:

}

// to write LED and Display
void setDataPinAsOutput()
{
  if (DataPinMode != OUTPUT)
  {
    for (int i=0; i<8; i++)
      pinMode( dataPin[i], OUTPUT);
    delay(2);
  
    DataPinMode = OUTPUT;
  }
}
